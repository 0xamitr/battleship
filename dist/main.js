(()=>{"use strict";function e(e,t){const l=document.createElement("div");l.setAttribute("style","height: 58px; width: 58px; border: solid 1px black"),l.setAttribute("class",`${t}`);let r=0,o=0;for(let t=0;t<100;t++){let t=l.cloneNode(),a=[o,r];t.innerText=`${a}`,t.classList.add(`${a}`),t.style.fontSize="0",e.append(t),r++,r%10==0&&(o++,r=0)}}const t=()=>({playerboard:(()=>{let e=[[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],t=!1;const l=[];let r=0;return{gameStatus:()=>t,place:(t,r,o)=>{console.log("placecalled");const a=(e=>{const t=e;let l=0,r=!1;const o=()=>(l==t&&(r=!0),r);return{cords:[],hit:()=>{if(1==r)return!1;l++,o()},isSunk:o}})(r);if(2!=t.length)return!1;if(r<1)return!1;let n=r;if((()=>{let o=[];if(10-t[1]>=r){let s=0;for(;n;)"ship"!=e[t[0]][t[1]+r-n]&&(o.push([[t[0]],[t[1]+r-n]]),s++),n--;if(s==r)return a.cords=o,l.push(a),o=[],!0}return!1})()){for(console.log("run"),n=r;n;){e[t[0]][t[1]+r-n]="ship";let l=[t[0],t[1]+r-n];"player1"==o&&(document.getElementsByClassName(l)[0].style.backgroundColor="grey"),"player2"==o&&(document.getElementsByClassName(l)[1].style.backgroundColor="grey"),n--}return!0}return!1},receiveAttack:o=>{const a=l.length;return"ship"==e[o[0]][o[1]]?l.forEach((t=>{t.cords.forEach((l=>{o[0]==l[0]&&o[1]==l[1]&&(t.hit(),1==t.isSunk()&&r++,e[o[0]][o[1]]="X")}))})):e[o[0]][o[1]]="@",a==r&&(t=!0),e[o[0]][o[1]]},getboard:()=>e}})()});!function(){const t=document.getElementsByClassName("gameboard");e(t[0],"player1"),e(t[1],"player2")}(),function(){const e=t(),l=t();document.getElementById("status").innerText="Place your Aircraft Carrier",function(e,t,l){let r=[],o=l,a=0,n=!0,s=o+1,c="placeship1",u=null,i=null,d=document.getElementById("status");Array.from(document.getElementsByClassName("player1")).forEach((l=>{l.addEventListener("click",(()=>{if("placeship1"==c&&n&&(0==a&&(d.innerText="Place your Submarine"),1==a&&(d.innerText="Place your Destroyer"),2==a&&(d.innerText="Place your Ship"),1==e.playerboard.place(l.innerText.split(",").map(Number),s,"player1")&&(a++,s--),a==o))return c="placeship2",d.innerText="Attack",void(c=function(e,t){let l=0,r=t+1;for(;l<t;){let t=Math.floor(10*Math.random()),o=[Math.floor(10*Math.random()),t];1==e.playerboard.place(o,r,"player2")&&(r--,l++)}return"player1"}(t,o))}))})),Array.from(document.getElementsByClassName("player2")).forEach((l=>{l.addEventListener("click",(()=>{if(n&&"player1"==c&&"a"!=l.className){let o=t.playerboard.receiveAttack(l.innerText.split(",").map(Number));if("X"==o&&(l.style.backgroundColor="red",l.setAttribute("class","a")),"X"!=o&&(l.style.backgroundColor="black",l.setAttribute("class","a")),1==t.playerboard.gameStatus())return console.log("player1 wins"),d.innerText="YOU WIN!",void(n=!1);c="player2";let a=function(e,t,l,r,o){let a;console.log(r),console.log(o);let n=document.getElementById("status");if(null==r&&null==o){do{let e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());a=[e,t]}while(t.some((e=>e[0]===a[0]&&e[1]===a[1])));t.push(a);let l=document.getElementsByClassName(a)[0],s=e.playerboard.receiveAttack(a);return"X"==s&&(l.style.backgroundColor="red",o=[a[0],a[1]+1],(t.some((e=>e[0]===o[0]&&e[1]===o[1]))||o[1]<0||o[1]>9)&&(o=null),r=[a[0],a[1]-1],(t.some((e=>e[0]===r[0]&&e[1]===r[1]))||r[1]<0||r[1]>9)&&(r=null)),"X"!=s&&(l.style.backgroundColor="black"),1==e.playerboard.gameStatus()?(console.log("player2 wins"),void(n.innerText="The Computer WINS! Better luck next time!")):["player1",r,o]}if(null!=r){a=r,t.push(a);let l=document.getElementsByClassName(a)[0],s=e.playerboard.receiveAttack(a);return"X"==s&&(l.style.backgroundColor="red",r=[r[0],r[1]-1],(t.some((e=>e[0]===r[0]&&e[1]===r[1]))||r[1]<0||r[1]>9)&&(r=null)),"X"!=s&&(l.style.backgroundColor="black",r=null),1==e.playerboard.gameStatus()?(n.innerText="The Computer WINS! Better luck next time!",void console.log("player2 wins")):["player1",r,o]}if(null!=o){a=o;let l=document.getElementsByClassName(a)[0],s=e.playerboard.receiveAttack(a);return t.push(a),"X"==s&&(l.style.backgroundColor="red",o=[o[0],o[1]+1],(t.some((e=>e[0]===o[0]&&e[1]===o[1]))||o[1]<0||o[1]>9)&&(o=null)),"X"!=s&&(l.style.backgroundColor="black",o=null),1==e.playerboard.gameStatus()?(n.innerText="The Computer WINS! Better luck next time!",void console.log("player2 wins")):["player1",r,o]}}(e,r,0,u,i);null!=a&&(c=a[0],u=a[1],i=a[2])}}))}))}(e,l,4)}()})();