(()=>{"use strict";function e(e,l){const t=document.createElement("div");t.setAttribute("style","height: 58px; width: 58px; border: solid 1px black"),t.setAttribute("class",`${l}`);let r=0,a=0;for(let l=0;l<100;l++){let l=t.cloneNode(),o=[a,r];l.innerText=`${o}`,l.classList.add(`${o}`),l.style.fontSize="0",e.append(l),r++,r%10==0&&(a++,r=0)}}const l=()=>({playerboard:(()=>{let e=[[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9],[0,1,2,3,4,5,6,7,8,9]],l=!1;const t=[];let r=0;return{gameStatus:()=>l,place:(l,r,a)=>{console.log("placecalled");const o=(e=>{const l=e;let t=0,r=!1;const a=()=>(t==l&&(r=!0),r);return{cords:[],hit:()=>{if(1==r)return!1;t++,a()},isSunk:a}})(r);if(2!=l.length)return!1;if(r<1)return!1;let n=r;if((()=>{let a=[];if(10-l[1]>=r){let s=0;for(;n;)"ship"!=e[l[0]][l[1]+r-n]&&(a.push([[l[0]],[l[1]+r-n]]),s++),n--;if(s==r)return o.cords=a,t.push(o),a=[],!0}return!1})()){for(console.log("run"),n=r;n;){e[l[0]][l[1]+r-n]="ship";let t=[l[0],l[1]+r-n];"player1"==a&&(document.getElementsByClassName(t)[0].style.backgroundColor="grey"),"player2"==a&&(document.getElementsByClassName(t)[1].style.backgroundColor="grey"),n--}return!0}return!1},receiveAttack:a=>{const o=t.length;return"ship"==e[a[0]][a[1]]?t.forEach((l=>{l.cords.forEach((t=>{a[0]==t[0]&&a[1]==t[1]&&(l.hit(),1==l.isSunk()&&r++,e[a[0]][a[1]]="X")}))})):e[a[0]][a[1]]="@",o==r&&(l=!0),e[a[0]][a[1]]},getboard:()=>e}})()});!function(){const l=document.getElementsByClassName("gameboard");e(l[0],"player1"),e(l[1],"player2")}(),function(e,l,t){let r=[],a=t,o=0,n=!0,s=a+1,c="placeship1",u=null,d=null;Array.from(document.getElementsByClassName("player1")).forEach((t=>{t.addEventListener("click",(()=>{if("placeship1"==c&&(1==e.playerboard.place(t.innerText.split(",").map(Number),s,"player1")&&(o++,s--),o==a))return c="placeship2",void(c=function(e,l){let t=0,r=l+1;for(;t<l;){let l=Math.floor(10*Math.random()),a=[Math.floor(10*Math.random()),l];1==e.playerboard.place(a,r,"player2")&&(r--,t++)}return"player1"}(l,a))}))})),Array.from(document.getElementsByClassName("player2")).forEach((t=>{t.addEventListener("click",(()=>{if(n&&"player1"==c&&"a"!=t.className){let a=l.playerboard.receiveAttack(t.innerText.split(",").map(Number));if("X"==a&&(t.style.backgroundColor="red",t.setAttribute("class","a")),"X"!=a&&(t.style.backgroundColor="black",t.setAttribute("class","a")),1==l.playerboard.gameStatus())return console.log("player1 wins"),void(n=!1);c="player2";let o=function(e,l,t,r,a){let o;if(console.log(r),console.log(a),null==r&&null==a){do{let e=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());o=[e,l]}while(l.some((e=>e[0]===o[0]&&e[1]===o[1])));l.push(o);let t=document.getElementsByClassName(o)[0],n=e.playerboard.receiveAttack(o);return"X"==n&&(t.style.backgroundColor="red",a=[o[0],o[1]+1],(l.some((e=>e[0]===a[0]&&e[1]===a[1]))||a[1]<0||a[1]>9)&&(a=null),r=[o[0],o[1]-1],(l.some((e=>e[0]===r[0]&&e[1]===r[1]))||r[1]<0||r[1]>9)&&(r=null)),"X"!=n&&(t.style.backgroundColor="black"),1==e.playerboard.gameStatus()?void console.log("player2 wins"):["player1",r,a]}if(null!=r){o=r,l.push(o);let t=document.getElementsByClassName(o)[0],n=e.playerboard.receiveAttack(o);return"X"==n&&(t.style.backgroundColor="red",r=[r[0],r[1]-1],(l.some((e=>e[0]===r[0]&&e[1]===r[1]))||r[1]<0||r[1]>9)&&(r=null)),"X"!=n&&(t.style.backgroundColor="black",r=null),1==e.playerboard.gameStatus()?void console.log("player2 wins"):["player1",r,a]}if(null!=a){o=a;let t=document.getElementsByClassName(o)[0],n=e.playerboard.receiveAttack(o);return l.push(o),"X"==n&&(t.style.backgroundColor="red",a=[a[0],a[1]+1],(l.some((e=>e[0]===a[0]&&e[1]===a[1]))||a[1]<0||a[1]>9)&&(a=null)),"X"!=n&&(t.style.backgroundColor="black",a=null),1==e.playerboard.gameStatus()?void console.log("player2 wins"):["player1",r,a]}}(e,r,0,u,d);null!=o&&(c=o[0],u=o[1],d=o[2])}}))}))}(l(),l(),4)})();